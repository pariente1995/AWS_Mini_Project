<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<!-- * CREATE TABLE T_SGJ_QUESTION ( * QUESTION_NO INT PRIMARY KEY, * QUESTION_TITLE 
	VARCHAR(150) NOT NULL, * QUESTION_CONTENT VARCHAR(1500) NOT NULL, * QUESTION_RGST_DATE 
	DATETIME NOT NULL DEFAULT NOW(), * QUESTION_STATE VARCHAR(20) NOT NULL DEFAULT 
	'접수중', * QUESTION_ANSWER VARCHAR(1500) NULL, * USER_ID VARCHAR(30) NOT NULL, 
	* QUESTION_SECRET_YN CHAR(1) NULL DEFAULT 'N' ); -->
<mapper namespace="QuestionDAO">
	<!-- 쿼리 작성 영역 -->
	<insert id="insertQuestion" parameterType="question">
		INSERT INTO
		T_SGJ_QUESTION(
		QUESTION_NO,
		QUESTION_TITLE,
		QUESTION_CONTENT,
		QUESTION_RGST_DATE,
		USER_ID,
		QUESTION_SECRET_YN
		)
		VALUES (
		(SELECT IFNULL(MAX(A.QUESTION_NO), 0) + 1 FROM T_SGJ_QUESTION A),
		#{questionTitle},
		#{questionContent},
		now(),
		#{userId},
		#{questionSecretYn}
		)
	</insert>

	<select id="getQuestion" parameterType="int"
		resultType="question">
		SELECT *
		FROM T_SGJ_QUESTION
		WHERE QUESTION_NO = #{questionNo}
	</select>

	<select id="getQuestionList" resultType="question">
		SELECT * FROM T_SGJ_QUESTION

	</select>

	<!-- <select id="getBoardList" parameterType="map" resultType="board"> <![CDATA[ 
		SELECT * FROM T_SGJ_QUESTION ]]> <if test="boardSearch.searchKeyword != null 
		and boardSearch.searchKeyword != ''"> <if test="boardSearch.searchCondition 
		== 'all'"> WHERE 1 = 0 OR BOARD_TITLE LIKE CONCAT('%', #{boardSearch.searchKeyword}, 
		'%') OR BOARD_CONTENT LIKE CONCAT('%', #{boardSearch.searchKeyword}, '%') 
		OR BOARD_WRITER LIKE CONCAT('%', #{boardSearch.searchKeyword}, '%') </if> 
		<if test="boardSearch.searchCondition != 'all'"> WHERE 1 = 1 <if test="boardSearch.searchCondition 
		== 'title'"> AND BOARD_TITLE LIKE CONCAT('%', #{boardSearch.searchKeyword}, 
		'%') </if> <if test="boardSearch.searchCondition == 'content'"> AND BOARD_CONTENT 
		LIKE CONCAT('%', #{boardSearch.searchKeyword}, '%') </if> <if test="boardSearch.searchCondition 
		== 'writer'"> AND BOARD_WRITER LIKE CONCAT('%', #{boardSearch.searchKeyword}, 
		'%') </if> </if> </if> LIMIT #{cri.amount} OFFSET #{cri.startNum} </select> 
		<update id="updateBoardCnt" parameterType="int"> UPDATE T_SGJ_QUESTION SET 
		BOARD_CNT = BOARD_CNT + 1 WHERE BOARD_NO = #{boardNo} </update> <update id="updateBoard" 
		parameterType="board"> UPDATE T_SGJ_QUESTION SET BOARD_TITLE = #{boardTitle} 
		, BOARD_CONTENT = #{boardContent} WHERE BOARD_NO = #{boardNo} </update> <delete 
		id="deleteBoard" parameterType="int"> DELETE FROM T_SGJ_QUESTION WHERE BOARD_NO 
		= #{boardNo} </delete> <select id="getBoardTotalCnt" parameterType="map" 
		resultType="int"> SELECT COUNT(*) FROM T_SGJ_QUESTION <if test="searchKeyword 
		!= null and searchKeyword != ''"> <if test="searchCondition == 'all'"> WHERE 
		1 = 0 OR BOARD_TITLE LIKE CONCAT('%', #{searchKeyword}, '%') OR BOARD_CONTENT 
		LIKE CONCAT('%', #{searchKeyword}, '%') OR BOARD_WRITER LIKE CONCAT('%', 
		#{searchKeyword}, '%') </if> <if test="searchCondition != 'all'"> WHERE 1 
		= 1 <if test="searchCondition == 'title'"> AND BOARD_TITLE LIKE CONCAT('%', 
		#{searchKeyword}, '%') </if> <if test="searchCondition == 'content'"> AND 
		BOARD_CONTENT LIKE CONCAT('%', #{searchKeyword}, '%') </if> <if test="searchCondition 
		== 'writer'"> AND BOARD_WRITER LIKE CONCAT('%', #{searchKeyword}, '%') </if> 
		</if> </if> </select> -->












</mapper>